<%=

require 'json'

controller = link("silk-controller")

conf = {}
conf["network"] = controller.p("network")
conf["vni"] = controller.p("vni")
conf["vtep_port"] = p("vtep_port")
conf["vtep_ip"] = spec.address
conf["poll_interval"] = p("poll_interval")
conf["flannel_subnet_file"] = p("flannel_subnet_file")

conf["controller"] = {
  "host" => controller.instances.first.address,
  "port" => controller.p("listen_port").to_i,
}

JSON.pretty_generate(conf)

%>
