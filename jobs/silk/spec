---
name: silk

templates:
  silk_ctl.erb: bin/silk_ctl
  silk.json.erb: config/silk.json
  00-silk.conf.erb: config/cni/00-silk.conf

consumes:
- name: silk-controller
  type: silk-controller

packages:
- silk
- runc-cni

properties:
  vtep_port:
    description: "UDP port to use for VXLAN Tunnel Endpoints"
    default: 8472

  flannel_subnet_file:
    description: "Path to the flannel subnet file"
    default: "/var/vcap/data/flannel/subnet.env"

  poll_interval:
    description: "Interval for polling silk-controller, in seconds"
    default: 15

  cni_datastore_path:
    description: "File where the wrapper plugin will store container info"
    default: "/var/vcap/data/container-metadata/store.json"

  cni_iptables_lock_file:
    description: "File that will be used to synchronize access to iptables"
    default: /var/vcap/data/garden-cni/iptables.lock

  flannel_data_dir:
    description: "Directory that flannel uses for storing internal CNI plugin data"
    default: /var/vcap/data/flannel/data
